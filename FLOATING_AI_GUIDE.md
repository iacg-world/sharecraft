# 悬浮AI助手使用指南

## 🎯 功能概述

悬浮AI助手是一个全新的用户交互方式，将AI功能从侧边栏移动到了屏幕右下角的悬浮按钮，提供更便捷的访问体验。

## ✨ 主要特性

### 🔘 悬浮按钮
- **位置**：默认位置在屏幕右下角
- **样式**：圆形蓝色渐变背景，带有脉冲动画效果
- **图标**：机器人图标，清晰表示AI功能
- **提示**：悬停显示"AI助手"工具提示

### 🎯 可拖拽功能
- **自由拖拽**：鼠标按住按钮可以拖拽到屏幕任意位置
- **边界限制**：确保按钮不会拖拽到屏幕外
- **位置记忆**：拖拽后的位置会自动保存到localStorage
- **响应式**：窗口大小改变时自动调整位置

### 🎨 交互效果
- **悬停效果**：按钮放大1.1倍，阴影增强
- **点击效果**：轻微缩小效果
- **拖拽状态**：拖拽时按钮放大，光标变为抓取状态
- **防误触**：拖拽过程中不会触发点击事件

### 📱 模态框界面
- **大尺寸**：80%视窗宽度，70%视窗高度
- **完整功能**：包含完整的AI对话功能
- **响应式**：适配不同屏幕尺寸

## 🚀 使用方法

### 1. 访问AI助手
1. 进入编辑器页面（只在编辑器页面显示）
2. 在屏幕右下角找到蓝色的悬浮AI按钮
3. 点击按钮打开AI助手模态框

### 2. 拖拽定位
1. 鼠标按住悬浮按钮不放
2. 拖拽到你喜欢的位置
3. 松开鼠标，位置将自动保存

### 3. AI对话
1. 在模态框中与AI助手对话
2. 输入页面设计需求
3. 查看生成的组件并应用到编辑器
4. 关闭模态框继续编辑

## 🎪 演示案例

### 案例1：基本使用
1. **进入编辑器页面**
2. **找到悬浮按钮**：右下角蓝色圆形按钮
3. **点击打开**：模态框弹出，显示AI对话界面
4. **输入需求**："创建一个登录页面"
5. **应用结果**：点击"应用到编辑器"
6. **关闭模态框**：组件已添加到画布

### 案例2：拖拽定位
1. **按住按钮**：鼠标在悬浮按钮上按下不放
2. **拖拽移动**：拖拽到屏幕左下角
3. **松开鼠标**：按钮固定在新位置
4. **位置保持**：刷新页面后位置保持不变

### 案例3：响应式适配
1. **改变窗口大小**：缩小浏览器窗口
2. **自动调整**：按钮自动调整到可见范围内
3. **边界保护**：不会超出屏幕边界

## 🎨 视觉设计

### 按钮样式
```scss
// 基础样式
- 尺寸：60x60px
- 背景：蓝色渐变(#1890ff → #40a9ff)
- 形状：圆形
- 阴影：软阴影效果
- 动画：3秒循环脉冲动画

// 交互状态
- 悬停：放大110%，阴影增强
- 激活：缩小95%
- 拖拽：放大105%，光标变为grabbing
```

### 工具提示
```scss
- 位置：按钮上方
- 背景：半透明黑色
- 文字：白色，12px
- 动画：淡入淡出效果
- 箭头：指向按钮的小三角
```

## 🔧 技术实现

### 拖拽功能
```typescript
// 核心拖拽逻辑
const startDrag = (e: MouseEvent) => {
  // 记录起始位置
  // 绑定鼠标移动和松开事件
  // 防止文本选择
}

const onDrag = (e: MouseEvent) => {
  // 计算新位置
  // 边界检测
  // 实时更新位置
}

const stopDrag = () => {
  // 清理事件监听
  // 保存位置到localStorage
}
```

### 位置管理
```typescript
// 初始化位置
const initPosition = () => {
  position.x = window.innerWidth - 60 - 20
  position.y = window.innerHeight - 60 - 20
}

// 恢复保存的位置
const restorePosition = () => {
  const saved = localStorage.getItem('aiAssistantPosition')
  // 验证位置有效性
  // 应用保存的位置
}
```

### 显示控制
```typescript
// 只在特定页面显示
const shouldShowAI = computed(() => {
  const showAIRoutes = ['/editor', '/editor/']
  return showAIRoutes.some(path => route.path.includes(path))
})
```

## 📱 响应式设计

### 桌面端
- 按钮大小：60px
- 拖拽灵敏度：正常
- 工具提示：完整显示

### 移动端
- 按钮大小：可能需要调整为更大尺寸
- 触摸友好的拖拽体验
- 工具提示：适配触摸交互

### 平板端
- 中等尺寸按钮
- 触摸和鼠标双重支持
- 横竖屏自适应

## 🎯 用户体验优化

### 1. 视觉反馈
- **脉冲动画**：吸引用户注意力
- **悬停效果**：明确可交互状态
- **拖拽状态**：清晰的视觉变化
- **工具提示**：功能说明

### 2. 交互优化
- **防误触**：拖拽时不触发点击
- **边界保护**：不会拖拽到不可见区域
- **位置记忆**：保持用户偏好设置
- **流畅动画**：所有状态变化都有过渡

### 3. 性能考虑
- **事件节流**：拖拽事件优化
- **内存管理**：正确清理事件监听器
- **懒加载**：AI组件按需加载

## 🛠️ 故障排除

### 常见问题

**问题1：悬浮按钮不显示**
- 检查：是否在编辑器页面
- 检查：控制台是否有错误
- 解决：确保路由正确，刷新页面

**问题2：拖拽功能异常**
- 检查：是否有其他元素阻挡
- 检查：鼠标事件是否被其他代码拦截
- 解决：检查CSS z-index设置

**问题3：位置保存失效**
- 检查：localStorage是否可用
- 检查：浏览器隐私设置
- 解决：清除localStorage重新设置

**问题4：模态框显示异常**
- 检查：窗口尺寸是否过小
- 检查：CSS样式是否冲突
- 解决：调整模态框尺寸设置

### 调试方法

```javascript
// 在浏览器控制台调试
console.log('AI Assistant Position:', localStorage.getItem('aiAssistantPosition'))

// 清除保存的位置
localStorage.removeItem('aiAssistantPosition')

// 检查组件状态
// 在Vue DevTools中查看FloatingAIAssistant组件状态
```

## 🚀 未来扩展

### 近期计划
- **快捷键支持**：Alt+A快速打开AI助手
- **多主题适配**：支持深色模式
- **尺寸可调**：用户可自定义按钮大小
- **位置预设**：提供常用位置快速选择

### 长期规划
- **智能定位**：根据用户使用习惯自动调整位置
- **手势支持**：支持双击、长按等手势
- **语音交互**：语音唤醒AI助手
- **多窗口同步**：多个编辑器标签页位置同步

## 🎉 总结

悬浮AI助手为低代码平台带来了更加便捷和直观的AI交互体验。通过可拖拽的悬浮按钮设计，用户可以随时访问AI功能，同时不会干扰正常的编辑工作流程。这种设计既保持了功能的可访问性，又提供了良好的用户体验。 