# AI用户配置功能使用指南

## 🎯 功能概述

新增的AI用户配置功能允许用户在界面中直接配置AI相关参数，无需修改环境变量或重启应用。所有配置都保存在浏览器的localStorage中，方便用户个性化使用。

## ✨ 主要特性

### 🔧 可配置项
- **AI服务提供商**：OpenAI、Claude、自定义
- **API Key**：你的AI服务API密钥
- **Base URL**：API服务的基础地址
- **AI模型**：根据提供商动态显示可用模型
- **Max Tokens**：生成内容的最大长度(100-8000)
- **Temperature**：创意度控制(0-2)

### 💾 数据存储
- 配置自动保存到浏览器localStorage
- 跨浏览器会话持久化
- 支持配置导入/导出

### 🧪 连接测试
- 实时测试API连接状态
- 智能错误诊断和提示
- 连接状态可视化显示

## 🚀 使用方法

### 1. 打开AI设置

#### 方式一：通过悬浮AI助手
1. 进入编辑器页面
2. 点击右下角的蓝色悬浮AI按钮
3. 在AI对话界面点击"AI设置"按钮

#### 方式二：在开发时直接访问
如果你是开发者，可以直接使用`AISettings`组件

### 2. 配置AI服务

#### OpenAI配置
1. 选择"OpenAI"作为服务提供商
2. 输入你的OpenAI API Key（格式：sk-xxxxxxxx）
3. Base URL通常保持默认：`https://api.openai.com/v1`
4. 选择模型：
   - **GPT-3.5 Turbo** (推荐，性价比高)
   - **GPT-4** (质量更高，成本更高)
   - **GPT-4 Turbo** (最新版本)
   - **GPT-4o** (多模态模型)

#### Claude配置
1. 选择"Claude"作为服务提供商
2. 输入你的Anthropic API Key
3. Base URL设为：`https://api.anthropic.com/v1`
4. 选择模型：
   - **Claude 3 Haiku** (快速，低成本)
   - **Claude 3 Sonnet** (推荐，平衡)
   - **Claude 3 Opus** (最强，高成本)

#### 自定义配置
1. 选择"自定义"作为服务提供商
2. 配置你的自定义API信息
3. 确保API兼容OpenAI格式

### 3. 调整高级参数

#### Max Tokens
- **范围**: 100-8000
- **建议**: 1500 (足够生成页面组件)
- **说明**: 数值越大，生成内容越详细，但成本也越高

#### Temperature
- **范围**: 0-2
- **0-0.3**: 非常保守，输出稳定
- **0.4-0.7**: 平衡，推荐值
- **0.8-1.2**: 创意性强
- **1.3-2.0**: 非常创意，输出随机性高

### 4. 测试连接

1. 填写完配置后，点击"测试连接"按钮
2. 系统会发送一个简单的测试请求
3. 根据测试结果显示连接状态：
   - ✅ **连接正常**: 绿色标签，API可正常使用
   - ❌ **连接失败**: 红色标签，需要检查配置

### 5. 保存配置

1. 验证配置无误后，点击"保存设置"
2. 配置会自动保存到localStorage
3. 下次打开页面时会自动加载保存的配置

## 🔍 故障排除

### 常见错误及解决方案

#### API Key无效
**错误**: `401 Unauthorized`
**原因**: API Key错误或已过期
**解决**:
- 检查API Key是否正确复制
- 确认API Key没有过期
- 验证账户余额是否充足

#### API地址错误
**错误**: `404 Not Found`
**原因**: Base URL配置错误
**解决**:
- 检查Base URL是否正确
- 确认API服务是否可用
- 对于自定义服务，确认地址格式

#### 权限被拒绝
**错误**: `403 Forbidden`
**原因**: API Key权限不足
**解决**:
- 检查API Key是否有正确权限
- 确认账户状态正常
- 联系服务提供商确认权限

#### 调用频率过高
**错误**: `429 Too Many Requests`
**原因**: API调用频率超限
**解决**:
- 稍等片刻后重试
- 检查是否有其他程序在调用API
- 考虑升级API套餐

#### 网络连接问题
**错误**: `NetworkError` 或 `Failed to fetch`
**原因**: 网络连接或代理问题
**解决**:
- 检查网络连接
- 确认防火墙设置
- 如使用代理，检查代理配置

## 💡 使用技巧

### 1. 配置优化
- **开发环境**: 使用GPT-3.5 Turbo降低成本
- **生产环境**: 可选择GPT-4获得更好效果
- **Temperature**: 0.7是平衡创意和准确性的好选择
- **Max Tokens**: 1500足够生成大多数页面组件

### 2. 成本控制
- 选择合适的模型，避免过度使用高成本模型
- 设置合理的Max Tokens限制
- 监控API使用情况和账单

### 3. 配置管理
- 定期备份重要配置
- 为不同项目使用不同的API Key
- 及时更新过期的API Key

### 4. 测试最佳实践
- 每次修改配置后都进行连接测试
- 关注测试响应的内容质量
- 根据测试结果调整参数

## 📊 配置建议

### 不同使用场景的推荐配置

#### 日常开发
```
Provider: OpenAI
Model: gpt-3.5-turbo
Max Tokens: 1500
Temperature: 0.7
```

#### 高质量生成
```
Provider: OpenAI
Model: gpt-4
Max Tokens: 2000
Temperature: 0.6
```

#### 快速原型
```
Provider: OpenAI
Model: gpt-3.5-turbo
Max Tokens: 1000
Temperature: 0.8
```

#### 预算有限
```
Provider: OpenAI
Model: gpt-3.5-turbo
Max Tokens: 800
Temperature: 0.5
```

## 🔐 安全注意事项

1. **API Key保护**
   - 不要在公共场所输入API Key
   - 定期轮换API Key
   - 不要截图包含API Key的界面

2. **权限控制**
   - 只给API Key必要的权限
   - 监控API使用情况
   - 及时发现异常调用

3. **数据隐私**
   - 了解AI服务的数据处理政策
   - 避免输入敏感信息进行测试
   - 关注数据留存政策

## 🆕 更新日志

### v1.0.0 (当前版本)
- ✅ 支持OpenAI、Claude、自定义API配置
- ✅ localStorage配置存储
- ✅ 实时连接测试
- ✅ 智能错误诊断
- ✅ 配置验证和提示
- ✅ 多模型选择支持

### 计划中的功能
- 🔄 配置导入/导出
- 📊 API使用统计
- 🔔 配置变更通知
- 💾 云端配置同步
- 🎨 配置预设方案

## 🤝 技术支持

如果在使用过程中遇到问题：

1. **检查控制台日志**: 浏览器F12查看详细错误信息
2. **查看配置状态**: 确认所有必填项都已正确填写
3. **测试连接**: 使用内置测试功能验证配置
4. **重置配置**: 如有问题可点击"重置"按钮恢复默认设置

希望这个配置功能能让你的AI页面生成体验更加便捷！🎉
